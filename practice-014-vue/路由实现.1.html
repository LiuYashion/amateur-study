<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>lyx</title>
<style>
ul{background: #333;padding: 20px}
a{color: #fff}
</style>
<body>
  <div id="app">
    <ul>
      <li><a href="#/">turn yellow</a></li>
      <li><a href="#/blue">turn blue</a></li>
      <li><a href="#/green">turn green</a></li>
    </ul>

    <ul>
      <li><button>前  进</button></li>
      <li><button>后  退</button></li>
    </ul>
  </div>
</body>
<script>

class Routers {
  constructor() {
    this.routes = {};
    this.currentURL = '';
    this.history = [];
    this.currentIndex = this.history.length - 1
    window.addEventListener('load', this.refresh.bind(this), false)
    window.addEventListener('hashchange', this.refresh.bind(this), false)
  }
  route(path, callback) {
    this.routes[path] = callback || function(){}
  }
  refresh() {
    this.currentURL = location.hash.slice(1) || '/'
    this.routes[this.currentURL]()
  }
  forward() {
    // 前进
    this.currentIndex >= this.history.length
      ? (this.currentIndex = this.history.length)
      : (this.currentIndex = this.currentIndex + 1);

    let hash = this.history[this.currentIndex] // url的hash就会实时更新
    location.hash = `#${hash}`
    this.routes[hash]();
  }
  backward() {
    // 后退
    this.currentIndex <= 0
      ? (this.currentIndex = 0)
      : (this.currentIndex = this.currentIndex - 1);

    let hash = this.history[this.currentIndex] // url的hash就会实时更新
    location.hash = `#${hash}`
    this.routes[hash]();
  }
}


var Router = new Routers();
var content = document.querySelector('body');
// change Page anything
function changeBgColor(color) {
  content.style.backgroundColor = color;
}
Router.route('/', function() {
  changeBgColor('yellow');
});
Router.route('/blue', function() {
  changeBgColor('blue');
});
Router.route('/green', function() {
  changeBgColor('green');
});
</script>
</head>
</html>


